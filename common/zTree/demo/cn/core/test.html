<!DOCTYPE html>
<HTML>
<HEAD>
	<TITLE> ZTREE DEMO - Simple Data</TITLE>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<link rel="stylesheet" href="../../../css/demo.css" type="text/css">
	<link rel="stylesheet" href="../../../css/zTreeStyle/zTree-test.css" type="text/css">
	 <script src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
	<script type="text/javascript" src="../../../js/jquery.ztree.core.js"></script>
	<!--  <script type="text/javascript" src="../../../js/jquery.ztree.excheck.js"></script>
	  <script type="text/javascript" src="../../../js/jquery.ztree.exedit.js"></script>-->
	<SCRIPT type="text/javascript">

	var zTree;
var setting = {
  view: {
    dblClickExpand: false,//双击节点时，是否自动展开父节点的标识
    showLine: false,//是否显示节点之间的连线
    showIcon:false,//是否显示节点图标
    fontCss:{'color':'black','font-weight':'bold'},//字体样式函数
    selectedMulti: false //设置是否允许同时选中多个节点
  },
  // check:{
  //   //chkboxType: { "Y": "ps", "N": "ps" },
  //   chkStyle: "checkbox",//复选框类型
  //   enable: true //每个节点上是否显示 CheckBox 
  // },
  data: {
    simpleData: {//简单数据模式
      enable:true,
      idKey: "id",
      pIdKey: "pId",
      rootPId: ""
    }
  },
  callback: {
    beforeClick: function(treeId, treeNode) {
      zTree = $.fn.zTree.getZTreeObj("user_tree");
      if (treeNode.isParent) {
        zTree.expandNode(treeNode);//如果是父节点，则展开该节点
      }else{
        zTree.checkNode(treeNode, !treeNode.checked, true, true);//单击勾选，再次单击取消勾选
      }
    }
  }
};
		/**
 * 页面初始化
 */
$(document).ready(function(){
  onLoadZTree();
});

/**
 * 加载树形结构数据
 */
function onLoadZTree(){
  var treeNodes;
  $.ajax({
    async:false,//是否异步
    cache:false,//是否使用缓存
    type:'POST',//请求方式：post
    dataType:'json',//数据传输格式：json
    url:"test",//请求的action路径
    error:function(){
      //请求失败处理函数
      alert('亲，请求失败！');
    },
    success:function(data){
      //console.log(data);
      //请求成功后处理函数
      treeNodes = data;//把后台封装好的简单Json格式赋给treeNodes
    }
  });
  
  var t = $("#user_tree");
  t = $.fn.zTree.init(t, setting, treeNodes);
}
	</SCRIPT>
 </HEAD>
<style>
.ztree li a{
	color:red !important;
}
</style>
<BODY>
<body>
  <div class="zTreeDemoBackground left">
    <ul id="user_tree" class="ztree" style="width:240px;border: 1px solid red;overflow:hidden;height: 826px;background:#212223;"></ul>
  </div>
</body>
</BODY>
</HTML>